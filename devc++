#include <iostream>
#include <string>
using namespace std;

// Estructura del nodo
struct Nodo {
    string nombre;
    Nodo* izquierdo;
    Nodo* derecho;
};

// Función para crear un nuevo nodo
Nodo* crearNodo(string nombre) {
    Nodo* nuevo = new Nodo();
    nuevo->nombre = nombre;
    nuevo->izquierdo = nullptr;
    nuevo->derecho = nullptr;
    return nuevo;
}

// Insertar un miembro (siguiendo las reglas del ABB)
Nodo* insertar(Nodo* raiz, string nombre) {
    if (raiz == nullptr)
        return crearNodo(nombre);

    if (nombre < raiz->nombre)
        raiz->izquierdo = insertar(raiz->izquierdo, nombre);
    else if (nombre > raiz->nombre)
        raiz->derecho = insertar(raiz->derecho, nombre);

    return raiz;
}

// Buscar un miembro en el árbol
bool buscar(Nodo* raiz, string nombre) {
    if (raiz == nullptr) return false;
    if (raiz->nombre == nombre) return true;
    if (nombre < raiz->nombre)
        return buscar(raiz->izquierdo, nombre);
    else
        return buscar(raiz->derecho, nombre);
}

// Mostrar el árbol (recorrido inorden)
void mostrarInorden(Nodo* raiz) {
    if (raiz != nullptr) {
        mostrarInorden(raiz->izquierdo);
        cout << raiz->nombre << " ";
        mostrarInorden(raiz->derecho);
    }
}

int main() {
    Nodo* raiz = nullptr;
    int opcion;
    string nombre;

    do {
        cout << "\n--- ARBOL GENEALOGICO ---\n";
        cout << "1. Agregar miembro\n";
        cout << "2. Buscar miembro\n";
        cout << "3. Mostrar genealogia (Inorden)\n";
        cout << "4. Salir\n";
        cout << "Seleccione una opcion: ";
        cin >> opcion;

        switch (opcion) {
            case 1:
                cout << "Ingrese el nombre del miembro: ";
                cin >> nombre;
                raiz = insertar(raiz, nombre);
                break;
            case 2:
                cout << "Ingrese el nombre a buscar: ";
                cin >> nombre;
                if (buscar(raiz, nombre))
                    cout << "El miembro SI existe en el arbol.\n";
                else
                    cout << "El miembro NO se encuentra.\n";
                break;
            case 3:
                cout << "Recorrido Inorden: ";
                mostrarInorden(raiz);
                cout << endl;
                break;
            case 4:
                cout << "Saliendo del programa...\n";
                break;
            default:
                cout << "Opcion no valida.\n";
        }
    } while (opcion != 4);

    return 0;
}
